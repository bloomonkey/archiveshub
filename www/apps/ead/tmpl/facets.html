<%def name="format_facet(facet)">
    <%
    idx = facet[0]
    termHash = facet[1]
    %>
    % if idx.startswith('vdb.'):
        <span class="facethead">Repository ${idx[idx.find('.') + 1:].title()}</span>
    % else:
        <span class="facethead">${idx[idx.find('.') + 1:].title()}</span>
    % endif
    
    <ul class="facet" id="${idx}-facet" >
    % for term, termData in termHash:
        <%
        filterClause = u'{0} exact "{1}"'.format(idx, term)
        %> 
        <li class="unmarked">
            <a href="${SCRIPT}/search.html?rsid=${resultSet.id}&filter=${filterClause|u}#leftCol">
            ${term.title()|h}
            </a>
            <span class="facet-hitcount">(${termData[1]})</span>
        </li>
    % endfor
    </ul>
</%def>