<%inherit file="dual.html"/>
<%namespace file="facets.html" import="format_facet"/>
<%namespace file="resultSet.html" import="displaying, format_resultSetItem, maximumRecordsSelect, sortBySelect, back_links"/>
<%!
    # Imports
    from cheshire3.utils import flattenTexts
    
    # Over-ride global attributes
    page_title = "Search :: Results"
    leftcol_class = "search"
    rightcol_class = "facets"
%>
<%block name="leftcol">
	<p class="hitreport">
        ${queryString}
        There are ${len(resultSet)} hits.
	</p>
	
	${displaying(resultSet, sortBy, maximumRecords, startRecord)}
    
    <table>
    % for index in range(startRecord - 1, min(len(resultSet), startRecord - 1 + maximumRecords)):
        <tr>
            <td>${format_resultSetItem(resultSet, sortBy, maximumRecords, startRecord, index)}</td>
        </tr>
	% endfor
    </table>

	${displaying(resultSet, sortBy, maximumRecords, startRecord)}

	% if len(resultSet) > maximumRecords and startRecord > 1:
        ${maximumRecordsSelect(resultSet, sortBy, maximumRecords, startRecord)}
		${back_links(resultSet, maximumRecords, startRecord)}
	% endif	
</%block>

<%block name="rightcol">
	% if facets:
		<h3>Filter your results by:</h3>
		% for facet in facets:
			${format_facet(facet)}
		% endfor
	% endif
</%block>
